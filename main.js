/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
*/
"use strict";
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => AndroidPdfPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian = require("obsidian");
var AndroidPdfPlugin = class extends import_obsidian.Plugin {
  async onload() {
    this.addRibbonIcon("pdf-file", "Export to PDF", () => {
      this.generatePdf();
    });
    this.addCommand({
      id: "export-android-pdf",
      name: "Export current file to PDF",
      callback: () => this.generatePdf()
    });
  }
  async generatePdf() {
    const activeFile = this.app.workspace.getActiveFile();
    if (!activeFile) {
      new import_obsidian.Notice("No active file selected.");
      return;
    }
    if (true) console.log(`[AndroidPdf] Starting export for ${activeFile.path}`);
    new import_obsidian.Notice(`Generating HTML for printing...`);
    const tempContainer = document.body.createDiv("print-temp-container");
    tempContainer.style.display = "none";
    try {
      try {
        if (true) console.log("[AndroidPdf] Rendering markdown...");
        const content = await this.app.vault.read(activeFile);
        await import_obsidian.MarkdownRenderer.render(
          this.app,
          content,
          tempContainer,
          activeFile.path,
          new import_obsidian.Component()
        );
      } catch (err) {
        console.error("[AndroidPdf] Markdown rendering failed", err);
        new import_obsidian.Notice("Failed to render Markdown content.");
        throw err;
      }
      const exportFolder = await this.createUniqueExportFolder(activeFile.basename);
      if (true) console.log(`[AndroidPdf] Export folder created: ${exportFolder}`);
      try {
        if (true) console.log("[AndroidPdf] Processing images...");
        await this.processImages(tempContainer, exportFolder);
        this.sanitizeElements(tempContainer);
      } catch (err) {
        console.error("[AndroidPdf] Image processing failed", err);
        new import_obsidian.Notice("Failed to process images.");
        throw err;
      }
      let fullHtml = "";
      try {
        const css = `
                <style>
                    body { 
                        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen-Sans, Ubuntu, Cantarell, "Helvetica Neue", sans-serif;
                        color: #000;
                        background: #fff;
                        padding: 20px;
                        line-height: 1.6;
                        font-size: 14px;
                        max-width: 800px;
                        margin: 0 auto;
                    }
                    img { max-width: 100%; height: auto; display: block; margin: 10px 0; }
                    h1, h2, h3, h4, h5, h6 { margin-top: 1.5em; margin-bottom: 0.5em; page-break-after: avoid; }
                    blockquote { border-left: 4px solid #ccc; padding-left: 10px; color: #666; }
                    code { background: #f4f4f4; padding: 2px 5px; border-radius: 3px; font-family: monospace; }
                    pre { background: #f4f4f4; padding: 10px; border-radius: 5px; overflow-x: auto; }
                    table { border-collapse: collapse; width: 100%; margin: 15px 0; }
                    th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
                    th { background-color: #f2f2f2; }
                    a { color: #007bff; text-decoration: none; }
                    /* Print-specific overrides */
                    @media print {
                        body { padding: 0; margin: 0; }
                        a { text-decoration: none; color: black; }
                    }
                </style>
                `;
        fullHtml = `
                    <!DOCTYPE html>
                    <html>
                    <head>
                        <title>${activeFile.basename}</title>
                        <meta charset="utf-8">
                        <meta name="viewport" content="width=device-width, initial-scale=1">
                        ${css}
                    </head>
                    <body>
                        ${tempContainer.innerHTML}
                        <script>
                            // Auto-trigger print when opened
                            window.onload = function() {
                                setTimeout(function() {
                                    window.print();
                                }, 500);
                            }
                        <\/script>
                    </body>
                    </html>
                `;
      } catch (err) {
        console.error("[AndroidPdf] HTML generation failed", err);
        new import_obsidian.Notice("Failed to generate HTML structure.");
        throw err;
      }
      try {
        if (true) console.log("[AndroidPdf] Saving to vault...");
        const fullHtmlBuffer = new TextEncoder().encode(fullHtml).buffer;
        const htmlPath = `${exportFolder}/index.html`;
        await this.app.vault.createBinary(htmlPath, fullHtmlBuffer);
        if (true) console.log(`[AndroidPdf] Saved to ${htmlPath}`);
        new import_obsidian.Notice(`Exported to: ${exportFolder}`);
        new OpenPdfModal(this.app, htmlPath).open();
      } catch (err) {
        console.error("[AndroidPdf] Saving failed", err);
        new import_obsidian.Notice("Failed to save the HTML file.");
        throw err;
      }
    } catch (e) {
      if (true) console.error("[AndroidPdf] General aborted", e);
    } finally {
      document.body.removeChild(tempContainer);
    }
  }
  async createUniqueExportFolder(basename) {
    const safeBasename = basename.replace(/[^a-z0-9]/gi, "_");
    let folderName = `${safeBasename}-Export`;
    if (!await this.app.vault.adapter.exists(folderName)) {
      await this.app.vault.createFolder(folderName);
      return folderName;
    }
    let i = 1;
    while (await this.app.vault.adapter.exists(`${folderName}-${i}`)) {
      i++;
    }
    const newFolderName = `${folderName}-${i}`;
    await this.app.vault.createFolder(newFolderName);
    return newFolderName;
  }
  async saveFileToVault(buffer, filename) {
    let safeName = filename;
    let i = 1;
    while (await this.app.vault.adapter.exists(safeName)) {
      safeName = filename.replace(".html", ` (${i}).html`);
      i++;
    }
    await this.app.vault.createBinary(safeName, buffer);
    return safeName;
  }
  async processImages(container, exportFolder) {
    var _a;
    const embeds = Array.from(container.querySelectorAll("span.internal-embed"));
    for (const span of embeds) {
      const src = span.getAttribute("src");
      if (!src) continue;
      const ext = (_a = src.split(".").pop()) == null ? void 0 : _a.toLowerCase();
      const imageExtensions = ["png", "jpg", "jpeg", "gif", "bmp", "svg", "webp", "heic"];
      if (ext && imageExtensions.includes(ext)) {
        const img = document.createElement("img");
        img.setAttribute("src", src);
        img.setAttribute("data-is-embed", "true");
        img.style.maxWidth = "100%";
        span.replaceWith(img);
      }
    }
    const images = Array.from(container.querySelectorAll("img"));
    const promises = images.map(async (img, index) => {
      const originalSrc = img.getAttribute("src");
      if (!originalSrc || originalSrc.startsWith("data:")) return;
      try {
        if (true) console.log(`[AndroidPdf] Processing img src: ${originalSrc}`);
        const isEmbed = img.getAttribute("data-is-embed") === "true";
        let linktext = "";
        if (isEmbed) {
          linktext = originalSrc;
        } else {
          const decodedSrc = decodeURIComponent(originalSrc);
          linktext = decodedSrc.split("?")[0];
          linktext = linktext.split("/").pop() || "";
        }
        let buffer = null;
        let mimeType = "image/png";
        const activeFile = this.app.workspace.getActiveFile();
        let file = this.app.metadataCache.getFirstLinkpathDest(linktext, (activeFile == null ? void 0 : activeFile.path) || "");
        if (!file && linktext) {
          file = this.app.vault.getFiles().find((f) => f.name === linktext);
        }
        if (file) {
          if (true) console.log(`[AndroidPdf] Found local file: ${file.path}`);
          buffer = await this.app.vault.readBinary(file);
          const ext = file.extension.toLowerCase();
          if (ext === "png") mimeType = "image/png";
          else if (ext === "jpg" || ext === "jpeg") mimeType = "image/jpeg";
          else if (ext === "webp") mimeType = "image/webp";
          else if (ext === "gif") mimeType = "image/gif";
          else if (ext === "svg") mimeType = "image/svg+xml";
        } else if (!isEmbed && originalSrc.startsWith("http")) {
          if (true) console.log(`[AndroidPdf] Trying requestUrl: ${originalSrc}`);
          const response = await (0, import_obsidian.requestUrl)({ url: originalSrc });
          buffer = response.arrayBuffer;
          mimeType = response.headers["content-type"] || "image/png";
        }
        if (buffer) {
          const base64 = await new Promise((resolve, reject) => {
            const blob = new Blob([buffer], { type: mimeType });
            const reader = new FileReader();
            reader.onloadend = () => {
              if (reader.result) {
                resolve(reader.result);
              } else {
                reject(new Error("Empty conversion result"));
              }
            };
            reader.onerror = reject;
            reader.readAsDataURL(blob);
          });
          img.setAttribute("src", base64);
          img.removeAttribute("srcset");
          img.removeAttribute("data-src");
          img.removeAttribute("data-is-embed");
          img.removeAttribute("sizes");
          if (true) console.log(`[AndroidPdf] Embedded image ${index} (${mimeType})`);
        } else {
          console.error(`[AndroidPdf] Could not resolve buffer for: ${originalSrc}`);
          img.alt = `[Image Missing]`;
          img.style.border = "1px solid red";
        }
      } catch (err) {
        console.error(`[AndroidPdf] Failed to process image ${originalSrc}`, err);
      }
    });
    await Promise.all(promises);
  }
  arrayBufferToBase64(buffer) {
    let binary = "";
    const bytes = new Uint8Array(buffer);
    const len = bytes.byteLength;
    for (let i = 0; i < len; i++) {
      binary += String.fromCharCode(bytes[i]);
    }
    return window.btoa(binary);
  }
  sanitizeElements(container) {
    container.querySelectorAll("video, audio, iframe").forEach((el) => {
      const placeholder = document.createElement("div");
      placeholder.innerText = `[Media/Embed not supported in PDF]`;
      placeholder.style.border = "1px dashed #ccc";
      placeholder.style.padding = "10px";
      placeholder.style.color = "#888";
      el.replaceWith(placeholder);
    });
  }
  async saveBlobToVault(blob, filename) {
    const arrayBuffer = await blob.arrayBuffer();
    await this.saveFileToVault(arrayBuffer, filename);
  }
  delay(ms) {
    return new Promise((resolve) => setTimeout(resolve, ms));
  }
};
var OpenPdfModal = class extends import_obsidian.Modal {
  constructor(app, filePath) {
    super(app);
    this.filePath = filePath;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.createEl("h2", { text: "HTML Generated" });
    contentEl.createEl("p", { text: "The print-ready HTML file has been saved to your vault." });
    contentEl.createEl("p", { text: "Would you like to open it in your default browser to print it as PDF?" });
    const div = contentEl.createDiv({ cls: "modal-button-container" });
    const btnOpen = div.createEl("button", { text: "Open in Browser", cls: "mod-cta" });
    btnOpen.addEventListener("click", () => {
      this.app.openWithDefaultApp(this.filePath);
      this.close();
    });
    const btnCancel = div.createEl("button", { text: "Cancel" });
    btnCancel.addEventListener("click", () => {
      this.close();
    });
  }
  onClose() {
    this.contentEl.empty();
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHsgUGx1Z2luLCBOb3RpY2UsIE1hcmtkb3duUmVuZGVyZXIsIENvbXBvbmVudCwgUGxhdGZvcm0sIHJlcXVlc3RVcmwsIE1vZGFsLCBBcHAgfSBmcm9tICdvYnNpZGlhbic7XG4vLyBAdHMtaWdub3JlXG4vLyBpbXBvcnQgaHRtbDJwZGYgZnJvbSAnaHRtbDJwZGYuanMnOyAvLyBSRU1PVkVEOiBVc2luZyBOYXRpdmUgUHJpbnRcblxuZGVjbGFyZSBjb25zdCBERUJVRzogYm9vbGVhbjtcblxuLy8gRXh0ZW5kaW5nIEFwcCBpbnRlcmZhY2UgdG8gaW5jbHVkZSBvcGVuV2l0aERlZmF1bHRBcHAgZm9yIG1vYmlsZVxuZGVjbGFyZSBtb2R1bGUgJ29ic2lkaWFuJyB7XG4gICAgaW50ZXJmYWNlIEFwcCB7XG4gICAgICAgIG9wZW5XaXRoRGVmYXVsdEFwcChwYXRoOiBzdHJpbmcpOiB2b2lkO1xuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQW5kcm9pZFBkZlBsdWdpbiBleHRlbmRzIFBsdWdpbiB7XG4gICAgXG4gICAgYXN5bmMgb25sb2FkKCkge1xuICAgICAgICAvLyBBZGQgcmliYm9uIGljb25cbiAgICAgICAgdGhpcy5hZGRSaWJib25JY29uKCdwZGYtZmlsZScsICdFeHBvcnQgdG8gUERGJywgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5nZW5lcmF0ZVBkZigpO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBBZGQgY29tbWFuZCBwYWxldHRlIGl0ZW1cbiAgICAgICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgICAgICAgIGlkOiAnZXhwb3J0LWFuZHJvaWQtcGRmJyxcbiAgICAgICAgICAgIG5hbWU6ICdFeHBvcnQgY3VycmVudCBmaWxlIHRvIFBERicsXG4gICAgICAgICAgICBjYWxsYmFjazogKCkgPT4gdGhpcy5nZW5lcmF0ZVBkZigpXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGFzeW5jIGdlbmVyYXRlUGRmKCkge1xuICAgICAgICBjb25zdCBhY3RpdmVGaWxlID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcbiAgICAgICAgaWYgKCFhY3RpdmVGaWxlKSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKCdObyBhY3RpdmUgZmlsZSBzZWxlY3RlZC4nKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0eXBlb2YgREVCVUcgIT09ICd1bmRlZmluZWQnICYmIERFQlVHKSBjb25zb2xlLmxvZyhgW0FuZHJvaWRQZGZdIFN0YXJ0aW5nIGV4cG9ydCBmb3IgJHthY3RpdmVGaWxlLnBhdGh9YCk7XG4gICAgICAgIG5ldyBOb3RpY2UoYEdlbmVyYXRpbmcgSFRNTCBmb3IgcHJpbnRpbmcuLi5gKTtcblxuICAgICAgICAvLyAtLS0gMS4gUFJFUEFSRSBURU1QIENPTlRBSU5FUiAtLS1cbiAgICAgICAgY29uc3QgdGVtcENvbnRhaW5lciA9IGRvY3VtZW50LmJvZHkuY3JlYXRlRGl2KCdwcmludC10ZW1wLWNvbnRhaW5lcicpO1xuICAgICAgICB0ZW1wQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgIFxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gLS0tIFNURVAgMjogUkVOREVSIE1BUktET1dOIC0tLVxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIERFQlVHICE9PSAndW5kZWZpbmVkJyAmJiBERUJVRykgY29uc29sZS5sb2coJ1tBbmRyb2lkUGRmXSBSZW5kZXJpbmcgbWFya2Rvd24uLi4nKTtcbiAgICAgICAgICAgICAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQucmVhZChhY3RpdmVGaWxlKTtcbiAgICAgICAgICAgICAgICBhd2FpdCBNYXJrZG93blJlbmRlcmVyLnJlbmRlcihcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHAsXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQsXG4gICAgICAgICAgICAgICAgICAgIHRlbXBDb250YWluZXIsXG4gICAgICAgICAgICAgICAgICAgIGFjdGl2ZUZpbGUucGF0aCxcbiAgICAgICAgICAgICAgICAgICAgbmV3IENvbXBvbmVudCgpXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tBbmRyb2lkUGRmXSBNYXJrZG93biByZW5kZXJpbmcgZmFpbGVkJywgZXJyKTtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdGYWlsZWQgdG8gcmVuZGVyIE1hcmtkb3duIGNvbnRlbnQuJyk7XG4gICAgICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyAtLS0gU1RFUCAzOiBQUkVQQVJFIEZPTERFUiAtLS1cbiAgICAgICAgICAgIGNvbnN0IGV4cG9ydEZvbGRlciA9IGF3YWl0IHRoaXMuY3JlYXRlVW5pcXVlRXhwb3J0Rm9sZGVyKGFjdGl2ZUZpbGUuYmFzZW5hbWUpO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBERUJVRyAhPT0gJ3VuZGVmaW5lZCcgJiYgREVCVUcpIGNvbnNvbGUubG9nKGBbQW5kcm9pZFBkZl0gRXhwb3J0IGZvbGRlciBjcmVhdGVkOiAke2V4cG9ydEZvbGRlcn1gKTtcblxuICAgICAgICAgICAgLy8gLS0tIFNURVAgNDogUFJPQ0VTUyBJTUFHRVMgLS0tXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgREVCVUcgIT09ICd1bmRlZmluZWQnICYmIERFQlVHKSBjb25zb2xlLmxvZygnW0FuZHJvaWRQZGZdIFByb2Nlc3NpbmcgaW1hZ2VzLi4uJyk7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wcm9jZXNzSW1hZ2VzKHRlbXBDb250YWluZXIsIGV4cG9ydEZvbGRlcik7XG4gICAgICAgICAgICAgICAgdGhpcy5zYW5pdGl6ZUVsZW1lbnRzKHRlbXBDb250YWluZXIpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignW0FuZHJvaWRQZGZdIEltYWdlIHByb2Nlc3NpbmcgZmFpbGVkJywgZXJyKTtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdGYWlsZWQgdG8gcHJvY2VzcyBpbWFnZXMuJyk7XG4gICAgICAgICAgICAgICAgdGhyb3cgZXJyOyBcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gLS0tIFNURVAgNTogQ1JFQVRFIEhUTUwgLS0tXG4gICAgICAgICAgICBsZXQgZnVsbEh0bWwgPSAnJztcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY3NzID0gYFxuICAgICAgICAgICAgICAgIDxzdHlsZT5cbiAgICAgICAgICAgICAgICAgICAgYm9keSB7IFxuICAgICAgICAgICAgICAgICAgICAgICAgZm9udC1mYW1pbHk6IC1hcHBsZS1zeXN0ZW0sIEJsaW5rTWFjU3lzdGVtRm9udCwgXCJTZWdvZSBVSVwiLCBSb2JvdG8sIE94eWdlbi1TYW5zLCBVYnVudHUsIENhbnRhcmVsbCwgXCJIZWx2ZXRpY2EgTmV1ZVwiLCBzYW5zLXNlcmlmO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6ICMwMDA7XG4gICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZmZmO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogMjBweDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpbmUtaGVpZ2h0OiAxLjY7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb250LXNpemU6IDE0cHg7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXgtd2lkdGg6IDgwMHB4O1xuICAgICAgICAgICAgICAgICAgICAgICAgbWFyZ2luOiAwIGF1dG87XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaW1nIHsgbWF4LXdpZHRoOiAxMDAlOyBoZWlnaHQ6IGF1dG87IGRpc3BsYXk6IGJsb2NrOyBtYXJnaW46IDEwcHggMDsgfVxuICAgICAgICAgICAgICAgICAgICBoMSwgaDIsIGgzLCBoNCwgaDUsIGg2IHsgbWFyZ2luLXRvcDogMS41ZW07IG1hcmdpbi1ib3R0b206IDAuNWVtOyBwYWdlLWJyZWFrLWFmdGVyOiBhdm9pZDsgfVxuICAgICAgICAgICAgICAgICAgICBibG9ja3F1b3RlIHsgYm9yZGVyLWxlZnQ6IDRweCBzb2xpZCAjY2NjOyBwYWRkaW5nLWxlZnQ6IDEwcHg7IGNvbG9yOiAjNjY2OyB9XG4gICAgICAgICAgICAgICAgICAgIGNvZGUgeyBiYWNrZ3JvdW5kOiAjZjRmNGY0OyBwYWRkaW5nOiAycHggNXB4OyBib3JkZXItcmFkaXVzOiAzcHg7IGZvbnQtZmFtaWx5OiBtb25vc3BhY2U7IH1cbiAgICAgICAgICAgICAgICAgICAgcHJlIHsgYmFja2dyb3VuZDogI2Y0ZjRmNDsgcGFkZGluZzogMTBweDsgYm9yZGVyLXJhZGl1czogNXB4OyBvdmVyZmxvdy14OiBhdXRvOyB9XG4gICAgICAgICAgICAgICAgICAgIHRhYmxlIHsgYm9yZGVyLWNvbGxhcHNlOiBjb2xsYXBzZTsgd2lkdGg6IDEwMCU7IG1hcmdpbjogMTVweCAwOyB9XG4gICAgICAgICAgICAgICAgICAgIHRoLCB0ZCB7IGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7IHBhZGRpbmc6IDhweDsgdGV4dC1hbGlnbjogbGVmdDsgfVxuICAgICAgICAgICAgICAgICAgICB0aCB7IGJhY2tncm91bmQtY29sb3I6ICNmMmYyZjI7IH1cbiAgICAgICAgICAgICAgICAgICAgYSB7IGNvbG9yOiAjMDA3YmZmOyB0ZXh0LWRlY29yYXRpb246IG5vbmU7IH1cbiAgICAgICAgICAgICAgICAgICAgLyogUHJpbnQtc3BlY2lmaWMgb3ZlcnJpZGVzICovXG4gICAgICAgICAgICAgICAgICAgIEBtZWRpYSBwcmludCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBib2R5IHsgcGFkZGluZzogMDsgbWFyZ2luOiAwOyB9XG4gICAgICAgICAgICAgICAgICAgICAgICBhIHsgdGV4dC1kZWNvcmF0aW9uOiBub25lOyBjb2xvcjogYmxhY2s7IH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIDwvc3R5bGU+XG4gICAgICAgICAgICAgICAgYDtcblxuICAgICAgICAgICAgICAgIGZ1bGxIdG1sID0gYFxuICAgICAgICAgICAgICAgICAgICA8IURPQ1RZUEUgaHRtbD5cbiAgICAgICAgICAgICAgICAgICAgPGh0bWw+XG4gICAgICAgICAgICAgICAgICAgIDxoZWFkPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHRpdGxlPiR7YWN0aXZlRmlsZS5iYXNlbmFtZX08L3RpdGxlPlxuICAgICAgICAgICAgICAgICAgICAgICAgPG1ldGEgY2hhcnNldD1cInV0Zi04XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8bWV0YSBuYW1lPVwidmlld3BvcnRcIiBjb250ZW50PVwid2lkdGg9ZGV2aWNlLXdpZHRoLCBpbml0aWFsLXNjYWxlPTFcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICR7Y3NzfVxuICAgICAgICAgICAgICAgICAgICA8L2hlYWQ+XG4gICAgICAgICAgICAgICAgICAgIDxib2R5PlxuICAgICAgICAgICAgICAgICAgICAgICAgJHt0ZW1wQ29udGFpbmVyLmlubmVySFRNTH1cbiAgICAgICAgICAgICAgICAgICAgICAgIDxzY3JpcHQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQXV0by10cmlnZ2VyIHByaW50IHdoZW4gb3BlbmVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93Lm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LnByaW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIDUwMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9zY3JpcHQ+XG4gICAgICAgICAgICAgICAgICAgIDwvYm9keT5cbiAgICAgICAgICAgICAgICAgICAgPC9odG1sPlxuICAgICAgICAgICAgICAgIGA7XG4gICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdbQW5kcm9pZFBkZl0gSFRNTCBnZW5lcmF0aW9uIGZhaWxlZCcsIGVycik7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnRmFpbGVkIHRvIGdlbmVyYXRlIEhUTUwgc3RydWN0dXJlLicpO1xuICAgICAgICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gLS0tIFNURVAgNjogU0FWRSBBTkQgUFJPTVBUIC0tLVxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIERFQlVHICE9PSAndW5kZWZpbmVkJyAmJiBERUJVRykgY29uc29sZS5sb2coJ1tBbmRyb2lkUGRmXSBTYXZpbmcgdG8gdmF1bHQuLi4nKTtcbiAgICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgICAgICAgY29uc3QgZnVsbEh0bWxCdWZmZXIgPSBuZXcgVGV4dEVuY29kZXIoKS5lbmNvZGUoZnVsbEh0bWwpLmJ1ZmZlcjtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBjb25zdCBodG1sUGF0aCA9IGAke2V4cG9ydEZvbGRlcn0vaW5kZXguaHRtbGA7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlQmluYXJ5KGh0bWxQYXRoLCBmdWxsSHRtbEJ1ZmZlcik7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBERUJVRyAhPT0gJ3VuZGVmaW5lZCcgJiYgREVCVUcpIGNvbnNvbGUubG9nKGBbQW5kcm9pZFBkZl0gU2F2ZWQgdG8gJHtodG1sUGF0aH1gKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGBFeHBvcnRlZCB0bzogJHtleHBvcnRGb2xkZXJ9YCk7XG4gICAgICAgICAgICAgICAgbmV3IE9wZW5QZGZNb2RhbCh0aGlzLmFwcCwgaHRtbFBhdGgpLm9wZW4oKTtcblxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignW0FuZHJvaWRQZGZdIFNhdmluZyBmYWlsZWQnLCBlcnIpO1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ0ZhaWxlZCB0byBzYXZlIHRoZSBIVE1MIGZpbGUuJyk7XG4gICAgICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIC8vIE1haW4gY2F0Y2ggZm9yIGFueSB1bmV4cGVjdGVkIGZsb3cgaW50ZXJydXB0aW9uc1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBERUJVRyAhPT0gJ3VuZGVmaW5lZCcgJiYgREVCVUcpIGNvbnNvbGUuZXJyb3IoJ1tBbmRyb2lkUGRmXSBHZW5lcmFsIGFib3J0ZWQnLCBlKTtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQodGVtcENvbnRhaW5lcik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyBjcmVhdGVVbmlxdWVFeHBvcnRGb2xkZXIoYmFzZW5hbWU6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgICAgIC8vIFNhbml0aXplIGJhc2VuYW1lIHRvIGVuc3VyZSB2YWxpZCBmb2xkZXIgbmFtZVxuICAgICAgICBjb25zdCBzYWZlQmFzZW5hbWUgPSBiYXNlbmFtZS5yZXBsYWNlKC9bXmEtejAtOV0vZ2ksICdfJyk7XG4gICAgICAgIGxldCBmb2xkZXJOYW1lID0gYCR7c2FmZUJhc2VuYW1lfS1FeHBvcnRgXG4gICAgICAgIFxuICAgICAgICBpZiAoIShhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyhmb2xkZXJOYW1lKSkpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZUZvbGRlcihmb2xkZXJOYW1lKTtcbiAgICAgICAgICAgIHJldHVybiBmb2xkZXJOYW1lO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGkgPSAxO1xuICAgICAgICB3aGlsZSAoYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5leGlzdHMoYCR7Zm9sZGVyTmFtZX0tJHtpfWApKSB7XG4gICAgICAgICAgICBpKys7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbmV3Rm9sZGVyTmFtZSA9IGAke2ZvbGRlck5hbWV9LSR7aX1gO1xuICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGVGb2xkZXIobmV3Rm9sZGVyTmFtZSk7XG4gICAgICAgIHJldHVybiBuZXdGb2xkZXJOYW1lO1xuICAgIH1cblxuICAgIGFzeW5jIHNhdmVGaWxlVG9WYXVsdChidWZmZXI6IEFycmF5QnVmZmVyLCBmaWxlbmFtZTogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICAgICAgbGV0IHNhZmVOYW1lID0gZmlsZW5hbWU7XG4gICAgICAgIGxldCBpID0gMTtcbiAgICAgICAgd2hpbGUgKGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKHNhZmVOYW1lKSkge1xuICAgICAgICAgICAgc2FmZU5hbWUgPSBmaWxlbmFtZS5yZXBsYWNlKCcuaHRtbCcsIGAgKCR7aX0pLmh0bWxgKTtcbiAgICAgICAgICAgIGkrKztcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGVCaW5hcnkoc2FmZU5hbWUsIGJ1ZmZlcik7XG4gICAgICAgIHJldHVybiBzYWZlTmFtZTtcbiAgICB9XG5cbiAgICBhc3luYyBwcm9jZXNzSW1hZ2VzKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIGV4cG9ydEZvbGRlcjogc3RyaW5nKSB7XG4gICAgICAgIC8vIFBoYXNlIDE6IEhhbmRsZSBPYnNpZGlhbiBcImludGVybmFsLWVtYmVkXCIgc3BhbnNcbiAgICAgICAgY29uc3QgZW1iZWRzID0gQXJyYXkuZnJvbShjb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnc3Bhbi5pbnRlcm5hbC1lbWJlZCcpKTtcbiAgICAgICAgXG4gICAgICAgIGZvciAoY29uc3Qgc3BhbiBvZiBlbWJlZHMpIHtcbiAgICAgICAgICAgIGNvbnN0IHNyYyA9IHNwYW4uZ2V0QXR0cmlidXRlKCdzcmMnKTtcbiAgICAgICAgICAgIGlmICghc3JjKSBjb250aW51ZTtcblxuICAgICAgICAgICAgY29uc3QgZXh0ID0gc3JjLnNwbGl0KCcuJykucG9wKCk/LnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICBjb25zdCBpbWFnZUV4dGVuc2lvbnMgPSBbJ3BuZycsICdqcGcnLCAnanBlZycsICdnaWYnLCAnYm1wJywgJ3N2ZycsICd3ZWJwJywgJ2hlaWMnXTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKGV4dCAmJiBpbWFnZUV4dGVuc2lvbnMuaW5jbHVkZXMoZXh0KSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuICAgICAgICAgICAgICAgIGltZy5zZXRBdHRyaWJ1dGUoJ3NyYycsIHNyYyk7XG4gICAgICAgICAgICAgICAgaW1nLnNldEF0dHJpYnV0ZSgnZGF0YS1pcy1lbWJlZCcsICd0cnVlJyk7XG4gICAgICAgICAgICAgICAgaW1nLnN0eWxlLm1heFdpZHRoID0gJzEwMCUnO1xuICAgICAgICAgICAgICAgIHNwYW4ucmVwbGFjZVdpdGgoaW1nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFBoYXNlIDI6IFByb2Nlc3MgYWxsIGltZyB0YWdzIC0+IENvbnZlcnQgdG8gQmFzZTY0XG4gICAgICAgIGNvbnN0IGltYWdlcyA9IEFycmF5LmZyb20oY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJ2ltZycpKTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHByb21pc2VzID0gaW1hZ2VzLm1hcChhc3luYyAoaW1nLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgb3JpZ2luYWxTcmMgPSBpbWcuZ2V0QXR0cmlidXRlKCdzcmMnKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gU2tpcCBhbHJlYWR5IGVtYmVkZGVkIGltYWdlc1xuICAgICAgICAgICAgaWYgKCFvcmlnaW5hbFNyYyB8fCBvcmlnaW5hbFNyYy5zdGFydHNXaXRoKCdkYXRhOicpKSByZXR1cm47XG5cbiAgICAgICAgICAgIC8vIE1hcmsgcHJvY2Vzc2luZyB0byBhdm9pZCBsb29wcyBpZiBuZWVkZWQsIHRob3VnaCBtYXAgaXMgc2FmZVxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIERFQlVHICE9PSAndW5kZWZpbmVkJyAmJiBERUJVRykgY29uc29sZS5sb2coYFtBbmRyb2lkUGRmXSBQcm9jZXNzaW5nIGltZyBzcmM6ICR7b3JpZ2luYWxTcmN9YCk7XG5cbiAgICAgICAgICAgICAgICBjb25zdCBpc0VtYmVkID0gaW1nLmdldEF0dHJpYnV0ZSgnZGF0YS1pcy1lbWJlZCcpID09PSAndHJ1ZSc7XG4gICAgICAgICAgICAgICAgbGV0IGxpbmt0ZXh0ID0gJyc7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgaWYgKGlzRW1iZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgbGlua3RleHQgPSBvcmlnaW5hbFNyYztcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBkZWNvZGVkU3JjID0gZGVjb2RlVVJJQ29tcG9uZW50KG9yaWdpbmFsU3JjKTtcbiAgICAgICAgICAgICAgICAgICAgbGlua3RleHQgPSBkZWNvZGVkU3JjLnNwbGl0KCc/JylbMF07XG4gICAgICAgICAgICAgICAgICAgIGxpbmt0ZXh0ID0gbGlua3RleHQuc3BsaXQoJy8nKS5wb3AoKSB8fCAnJztcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBsZXQgYnVmZmVyOiBBcnJheUJ1ZmZlciB8IG51bGwgPSBudWxsO1xuICAgICAgICAgICAgICAgIGxldCBtaW1lVHlwZSA9ICdpbWFnZS9wbmcnOyAvLyBkZWZhdWx0XG5cbiAgICAgICAgICAgICAgICAvLyAxLiBSZXNvbHZlIExvY2FsIEZpbGVcbiAgICAgICAgICAgICAgICBjb25zdCBhY3RpdmVGaWxlID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcbiAgICAgICAgICAgICAgICBsZXQgZmlsZSA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0Rmlyc3RMaW5rcGF0aERlc3QobGlua3RleHQsIGFjdGl2ZUZpbGU/LnBhdGggfHwgJycpO1xuXG4gICAgICAgICAgICAgICAgaWYgKCFmaWxlICYmIGxpbmt0ZXh0KSB7XG4gICAgICAgICAgICAgICAgICAgICBmaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0RmlsZXMoKS5maW5kKGYgPT4gZi5uYW1lID09PSBsaW5rdGV4dCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGZpbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBERUJVRyAhPT0gJ3VuZGVmaW5lZCcgJiYgREVCVUcpIGNvbnNvbGUubG9nKGBbQW5kcm9pZFBkZl0gRm91bmQgbG9jYWwgZmlsZTogJHtmaWxlLnBhdGh9YCk7XG4gICAgICAgICAgICAgICAgICAgIGJ1ZmZlciA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LnJlYWRCaW5hcnkoZmlsZSk7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAvLyBEZXRlcm1pbmUgTWltZSBUeXBlIGZyb20gRXh0ZW5zaW9uXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGV4dCA9IGZpbGUuZXh0ZW5zaW9uLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChleHQgPT09ICdwbmcnKSBtaW1lVHlwZSA9ICdpbWFnZS9wbmcnO1xuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChleHQgPT09ICdqcGcnIHx8IGV4dCA9PT0gJ2pwZWcnKSBtaW1lVHlwZSA9ICdpbWFnZS9qcGVnJztcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoZXh0ID09PSAnd2VicCcpIG1pbWVUeXBlID0gJ2ltYWdlL3dlYnAnO1xuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChleHQgPT09ICdnaWYnKSBtaW1lVHlwZSA9ICdpbWFnZS9naWYnO1xuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChleHQgPT09ICdzdmcnKSBtaW1lVHlwZSA9ICdpbWFnZS9zdmcreG1sJztcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICghaXNFbWJlZCAmJiBvcmlnaW5hbFNyYy5zdGFydHNXaXRoKCdodHRwJykpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gMi4gTmV0d29yayBSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgREVCVUcgIT09ICd1bmRlZmluZWQnICYmIERFQlVHKSBjb25zb2xlLmxvZyhgW0FuZHJvaWRQZGZdIFRyeWluZyByZXF1ZXN0VXJsOiAke29yaWdpbmFsU3JjfWApO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3RVcmwoeyB1cmw6IG9yaWdpbmFsU3JjIH0pO1xuICAgICAgICAgICAgICAgICAgICBidWZmZXIgPSByZXNwb25zZS5hcnJheUJ1ZmZlcjtcbiAgICAgICAgICAgICAgICAgICAgbWltZVR5cGUgPSByZXNwb25zZS5oZWFkZXJzWydjb250ZW50LXR5cGUnXSB8fCAnaW1hZ2UvcG5nJztcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyAzLiBDb252ZXJ0IHRvIEJhc2U2NCBhbmQgRW1iZWRcbiAgICAgICAgICAgICAgICBpZiAoYnVmZmVyKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIENvbnZlcnQgQXJyYXlCdWZmZXIgdG8gQmFzZTY0IHN0cmluZyB1c2luZyBGaWxlUmVhZGVyIChhc3luYykgZm9yIGJldHRlciBwZXJmb3JtYW5jZS9oYW5kbGluZ1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBiYXNlNjQgPSBhd2FpdCBuZXcgUHJvbWlzZTxzdHJpbmc+KChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGJsb2IgPSBuZXcgQmxvYihbYnVmZmVyXSwgeyB0eXBlOiBtaW1lVHlwZSB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWFkZXIub25sb2FkZW5kID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZWFkZXIucmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUocmVhZGVyLnJlc3VsdCBhcyBzdHJpbmcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoJ0VtcHR5IGNvbnZlcnNpb24gcmVzdWx0JykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICByZWFkZXIub25lcnJvciA9IHJlamVjdDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKGJsb2IpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBTZXQgdGhlIHNyYyB0byB0aGUgRGF0YSBVUklcbiAgICAgICAgICAgICAgICAgICAgaW1nLnNldEF0dHJpYnV0ZSgnc3JjJywgYmFzZTY0KTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIC8vIENsZWFuIHVwIGF0dHJpYnV0ZXNcbiAgICAgICAgICAgICAgICAgICAgaW1nLnJlbW92ZUF0dHJpYnV0ZSgnc3Jjc2V0Jyk7XG4gICAgICAgICAgICAgICAgICAgIGltZy5yZW1vdmVBdHRyaWJ1dGUoJ2RhdGEtc3JjJyk7XG4gICAgICAgICAgICAgICAgICAgIGltZy5yZW1vdmVBdHRyaWJ1dGUoJ2RhdGEtaXMtZW1iZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgaW1nLnJlbW92ZUF0dHJpYnV0ZSgnc2l6ZXMnKTsgLy8gaW1wb3J0YW50IHRvIHJlbW92ZSBzaXplcyBzbyBicm93c2VyIHVzZXMgbmF0dXJhbCBzaXplIG9yIHN0eWxlXG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIERFQlVHICE9PSAndW5kZWZpbmVkJyAmJiBERUJVRykgY29uc29sZS5sb2coYFtBbmRyb2lkUGRmXSBFbWJlZGRlZCBpbWFnZSAke2luZGV4fSAoJHttaW1lVHlwZX0pYCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYFtBbmRyb2lkUGRmXSBDb3VsZCBub3QgcmVzb2x2ZSBidWZmZXIgZm9yOiAke29yaWdpbmFsU3JjfWApO1xuICAgICAgICAgICAgICAgICAgICAgaW1nLmFsdCA9IGBbSW1hZ2UgTWlzc2luZ11gO1xuICAgICAgICAgICAgICAgICAgICAgLy8gT3B0aW9uYWw6IEFkZCBhIHZpc3VhbCBwbGFjZWhvbGRlclxuICAgICAgICAgICAgICAgICAgICAgaW1nLnN0eWxlLmJvcmRlciA9IFwiMXB4IHNvbGlkIHJlZFwiO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgW0FuZHJvaWRQZGZdIEZhaWxlZCB0byBwcm9jZXNzIGltYWdlICR7b3JpZ2luYWxTcmN9YCwgZXJyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwocHJvbWlzZXMpO1xuICAgIH1cblxuICAgIGFycmF5QnVmZmVyVG9CYXNlNjQoYnVmZmVyOiBBcnJheUJ1ZmZlcik6IHN0cmluZyB7XG4gICAgICAgIC8vIExlZ2FjeSwgdW51c2VkIG5vd1xuICAgICAgICBsZXQgYmluYXJ5ID0gJyc7XG4gICAgICAgIGNvbnN0IGJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoYnVmZmVyKTtcbiAgICAgICAgY29uc3QgbGVuID0gYnl0ZXMuYnl0ZUxlbmd0aDtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgYmluYXJ5ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoYnl0ZXNbaV0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB3aW5kb3cuYnRvYShiaW5hcnkpO1xuICAgIH1cblxuICAgIHNhbml0aXplRWxlbWVudHMoY29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xuICAgICAgICAvLyBSZW1vdmUgdmlkZW9zL2lmcmFtZXMgd2hpY2ggcmVuZGVyIGFzIGJsYWNrL3doaXRlIGJveGVzXG4gICAgICAgIGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCd2aWRlbywgYXVkaW8sIGlmcmFtZScpLmZvckVhY2goZWwgPT4ge1xuICAgICAgICAgICAgY29uc3QgcGxhY2Vob2xkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgIHBsYWNlaG9sZGVyLmlubmVyVGV4dCA9IGBbTWVkaWEvRW1iZWQgbm90IHN1cHBvcnRlZCBpbiBQREZdYDtcbiAgICAgICAgICAgIHBsYWNlaG9sZGVyLnN0eWxlLmJvcmRlciA9ICcxcHggZGFzaGVkICNjY2MnO1xuICAgICAgICAgICAgcGxhY2Vob2xkZXIuc3R5bGUucGFkZGluZyA9ICcxMHB4JztcbiAgICAgICAgICAgIHBsYWNlaG9sZGVyLnN0eWxlLmNvbG9yID0gJyM4ODgnO1xuICAgICAgICAgICAgZWwucmVwbGFjZVdpdGgocGxhY2Vob2xkZXIpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBhc3luYyBzYXZlQmxvYlRvVmF1bHQoYmxvYjogQmxvYiwgZmlsZW5hbWU6IHN0cmluZykge1xuICAgICAgICAvLyBMZWdhY3kgbWV0aG9kLCB1bnVzZWQgbm93IGJ1dCBrZXB0IGZvciByZWZlcmVuY2VcbiAgICAgICAgY29uc3QgYXJyYXlCdWZmZXIgPSBhd2FpdCBibG9iLmFycmF5QnVmZmVyKCk7XG4gICAgICAgIGF3YWl0IHRoaXMuc2F2ZUZpbGVUb1ZhdWx0KGFycmF5QnVmZmVyLCBmaWxlbmFtZSk7XG4gICAgfVxuXG4gICAgZGVsYXkobXM6IG51bWJlcikge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIG1zKSk7XG4gICAgfVxufVxuXG5jbGFzcyBPcGVuUGRmTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gICAgZmlsZVBhdGg6IHN0cmluZztcblxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBmaWxlUGF0aDogc3RyaW5nKSB7XG4gICAgICAgIHN1cGVyKGFwcCk7XG4gICAgICAgIHRoaXMuZmlsZVBhdGggPSBmaWxlUGF0aDtcbiAgICB9XG5cbiAgICBvbk9wZW4oKSB7XG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnSFRNTCBHZW5lcmF0ZWQnIH0pO1xuICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6ICdUaGUgcHJpbnQtcmVhZHkgSFRNTCBmaWxlIGhhcyBiZWVuIHNhdmVkIHRvIHlvdXIgdmF1bHQuJyB9KTtcbiAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiAnV291bGQgeW91IGxpa2UgdG8gb3BlbiBpdCBpbiB5b3VyIGRlZmF1bHQgYnJvd3NlciB0byBwcmludCBpdCBhcyBQREY/JyB9KTtcblxuICAgICAgICBjb25zdCBkaXYgPSBjb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiAnbW9kYWwtYnV0dG9uLWNvbnRhaW5lcicgfSk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBidG5PcGVuID0gZGl2LmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdPcGVuIGluIEJyb3dzZXInLCBjbHM6ICdtb2QtY3RhJyB9KTtcbiAgICAgICAgYnRuT3Blbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuYXBwLm9wZW5XaXRoRGVmYXVsdEFwcCh0aGlzLmZpbGVQYXRoKTtcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgYnRuQ2FuY2VsID0gZGl2LmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdDYW5jZWwnIH0pO1xuICAgICAgICBidG5DYW5jZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIG9uQ2xvc2UoKSB7XG4gICAgICAgIHRoaXMuY29udGVudEVsLmVtcHR5KCk7XG4gICAgfVxu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
